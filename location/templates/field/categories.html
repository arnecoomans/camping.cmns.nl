<div class="col-3 title-col">{% translate 'category'|title %}:</div>
<div class="col-8 list">
 {% if ajax.editable and perms.location.change_location %}
  <form
      action="{% url 'cmnsd:dispatch_field_of_object_by_id_and_slug' 'location' location.id location.slug 'category' %}?editable"
      data-action
      data-method="POST"
      data-body="form"
      data-refresh-url="{% url 'cmnsd:dispatch_field_of_object_by_id_and_slug' 'location' location.id location.slug 'categories' %}?editable"
      data-refresh-map='{"categories":"#categories"}'>
    <div class="input-group">
      <input
        name="name"
        type="text"
        value="{{ location.category.name }}"
        id="category-input"
        placeholder="{% translate 'add category'|capfirst %} - {% translate 'start typing to see suggestions'|capfirst %}"
        class="form-control"
        data-autosuggest
        data-url="{% url 'cmnsd:dispatch' 'categories'%}"
        data-param="{{ search_query_character}}"
          data-extra-params='{"format":"json", "exclude": "locations__slug:{{ location.slug }}", "exclude": "slug:{{ activity_slug|default:"activity" }},slug:{{ location.category.slug }},{% for category in location.additional_category.all %}slug:{{ category.slug }}{% if not forloop.last %},{% endif %}{% endfor %}"}'
        data-container="category"
        data-field-input="name"
        data-field-hidden="slug"
        data-min="0"
        data-allow-create="0"
        data-field-prefix="category__"
      >
      <button type="submit" class="btn btn-primary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-save" viewBox="0 0 16 16"><path d="M2 1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H9.5a1 1 0 0 0-1 1v7.293l2.646-2.647a.5.5 0 0 1 .708.708l-3.5 3.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L7.5 9.293V2a2 2 0 0 1 2-2H14a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h2.5a.5.5 0 0 1 0 1z"/></svg></button>
    </div>
  </form>
 {% else %}
  {% include 'field/category.html' with category=location.category %}
 {% endif %}
 {% if location.additional_category.all.count > 0 %} {% endif %}
  {% for category in location.additional_category.all %}
    {% include 'field/category.html' %}
  {% endfor %}
  {% if ajax.editable and perms.location.change_location %}
    <form class="cmnd-autosuggest"
      action="{% url 'cmnsd:dispatch_field_of_object_by_id_and_slug' 'location' location.id location.slug 'additional_category' %}?editable"
      data-action
      data-method="POST"
      data-body="form"
      data-refresh-url="{% url 'cmnsd:dispatch_field_of_object_by_id_and_slug' 'location' location.id location.slug 'categories' %}?editable"
      data-refresh-map='{"categories":"#categories"}'
    >
      <div class="input-group">
        <input
          name="name"
          type="text"
          id="category-input"
          placeholder="{% translate 'add category'|capfirst %} - {% translate 'start typing to see suggestions'|capfirst %}"
          class="form-control"
          data-autosuggest
          data-url="{% url 'cmnsd:dispatch' 'categories'%}"
          data-param="{{ search_query_character}}"
          data-extra-params='{"format":"json", "exclude": "locations__slug:{{ location.slug }}", "exclude": "slug:{{ activity_slug|default:"activity" }},slug:{{ location.category.slug }},{% for category in location.additional_category.all %}slug:{{ category.slug }}{% if not forloop.last %},{% endif %}{% endfor %}"}'
          data-container="category"
          data-field-input="name"
          data-field-hidden="slug"
          data-min="0"
          data-allow-create="0"
          data-field-prefix="additional_category__"
        >
        <button type="submit" class="btn btn-primary"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/><path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/></svg></button>
      </div>
    </form>
  {% endif %}
</div>
<div class="col-1 button-col">
  {% include 'element/reusable_edit_button.html' with field='categories' %}
</div>